{
    "typeName": "AWS::SES::ConfigurationSetEventDestination",
    "description": "Specifies a configuration set event destination. An event destination is an AWS service that Amazon SES publishes email sending events to. When you specify an event destination, you provide one, and only one, destination. You can send event data to Amazon CloudWatch or Amazon Kinesis Data Firehose. For information about using configuration sets, see the Amazon SES Developer Guide.",
    "sourceUrl": "https://github.com/aws-cloudformation/aws-cloudformation-resource-providers-ses.git",
    "properties": {
        "ConfigurationSetName": {
            "description": "The name of the configuration set that contains the event destination that you want to update.",
            "type": "string",
            "pattern": "^[a-zA-Z0-9_-]{0,63}$",
            "maxLength": 64
        },
        "EventDestination": {
            "description": "The event destination object that you want to apply to the specified configuration set.",
            "type": "object",
            "properties": {
                "Name": {
                    "description": "The name of the event destination.",
                    "type": "string",
                    "pattern": "^[a-zA-Z0-9_-]{0,63}$",
                    "maxLength": 64
                },
                "Enabled": {
                    "description": "Sets whether Amazon SES publishes events to this destination when you send an email with the associated configuration set. Set to true to enable publishing to this destination; set to false to prevent publishing to this destination. The default value is false.",
                    "type": "boolean"
                },
                "MatchingEventTypes": {
                    "type": "array",
                    "items": {
                        "description": "The type of email sending events to publish to the event destination.",
                        "type": "string",
                        "enum": [
                            "send",
                            "reject",
                            "bounce",
                            "complaint",
                            "delivery",
                            "open",
                            "click",
                            "renderingFailure"
                        ],
                        "minItems": 1
                    }
                },
                "CloudWatchDestination": {
                    "description": "An object that contains the names, default values, and sources of the dimensions associated with an Amazon CloudWatch event destination.",
                    "type": "object",
                    "properties": {
                        "DimensionConfigurations": {
                            "description": "A list of dimensions upon which to categorize your emails when you publish email sending events to Amazon CloudWatch.",
                            "type": "array",
                            "items": {
                                "description": "CloudWatchDimensionConfiguration contains the dimension configuration to use when you publish email sending events to Amazon CloudWatch.\n\nFor information about publishing email sending events to Amazon CloudWatch, see the Amazon SES Developer Guide.",
                                "properties": {
                                    "DefaultDimensionValue": {
                                        "description": "The default value of the dimension that is published to Amazon CloudWatch if you do not provide the value of the dimension when you send an email.",
                                        "type": "string",
                                        "pattern": "^[a-zA-Z0-9_-]{0,255}$",
                                        "maxLength": 256
                                    },
                                    "DimensionName": {
                                        "description": "The name of an Amazon CloudWatch dimension associated with an email sending metric.",
                                        "type": "string",
                                        "pattern": "^[a-zA-Z0-9_-]{0,255}$",
                                        "maxLength": 256
                                    },
                                    "DimensionValueSource": {
                                        "description": "The place where Amazon SES finds the value of a dimension to publish to Amazon CloudWatch. If you want Amazon SES to use the message tags that you specify using an X-SES-MESSAGE-TAGS header or a parameter to the SendEmail or SendRawEmail API, choose messageTag. If you want Amazon SES to use your own email headers, choose emailHeader.",
                                        "type": "string",
                                        "enum": [
                                            "messageTag",
                                            "emailHeader",
                                            "linkTag"
                                        ]
                                    }
                                },
                                "required": [
                                    "DefaultDimensionValue",
                                    "DimensionName",
                                    "DimensionValueSource"
                                ]
                            }
                        }
                    }
                },
                "KinesisFirehoseDestination": {
                    "description": "An object that contains the delivery stream ARN and the IAM role ARN associated with an Amazon Kinesis Firehose event destination.",
                    "type": "object",
                    "properties": {
                        "DeliveryStreamARN": {
                            "description": "The ARN of the Amazon Kinesis Firehose stream that email sending events should be published to.",
                            "type": "string"
                        },
                        "IAMRoleARN": {
                            "description": "The ARN of the IAM role under which Amazon SES publishes email sending events to the Amazon Kinesis Firehose stream.",
                            "type": "string"
                        }
                    },
                    "required": [
                        "DeliveryStreamARN",
                        "IAMRoleARN"
                    ]
                },
                "SNSDestination": {
                    "description": "An object that contains the topic ARN associated with an Amazon Simple Notification Service (Amazon SNS) event destination.",
                    "type": "object",
                    "properties": {
                        "TopicARN": {
                            "description": "The ARN of the Amazon SNS topic that email sending events will be published to. An example of an Amazon SNS topic ARN is arn:aws:sns:us-west-2:123456789012:MyTopic. For more information about Amazon SNS topics, see the Amazon SNS Developer Guide.",
                            "type": "string"
                        }
                    },
                    "required": [
                        "TopicARN"
                    ]
                }
            },
            "required": [
                "MatchingEventTypes",
                "Name"
            ]
        }
    },
    "required": [
        "ConfigurationSetName",
        "EventDestination"
    ],
    "createOnlyProperties": [
        "/properties/ConfigurationSetName"
    ],
    "primaryIdentifier": [
        "/properties/ConfigurationSetName",
        "/properties/EventDestination/Name"
    ],
    "handlers": {
        "create": {
            "permissions": [
                "ses:CreateConfigurationSetEventDestination"
            ]
        },
        "read": {
            "permissions": [
                "ses:DescribeConfigurationSet"
            ]
        },
        "update": {
            "permissions": [
                "ses:UpdateConfigurationSetEventDestination"
            ]
        },
        "delete": {
            "permissions": [
                "ses:DeleteConfigurationSetEventDestination"
            ]
        },
        "list": {
            "permissions": [
                "ses:DescribeConfigurationSet"
            ]
        }
    }
}
